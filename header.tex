%%
%% fonts
%%
% \usepackage{euler}
\usepackage[no-math]{fontspec}
% \usepackage{unicode-math}
% \usepackage[osf]{mathpazo} % 'o'ld 's'tyle 'f'igures are used in the manual, but you can leave this away, of course.
\setsansfont[Ligatures = TeX]{Helvetica}
\setmainfont[Ligatures = TeX]{Linux Libertine O}
\setmonofont{Inconsolata}

%% sans font as default
\renewcommand\familydefault{\sfdefault}

%%
%% color
%%
\usepackage[x11names, dvipsnames, table]{xcolor}
\definecolor{plasmid_col}{HTML}{15588D}
\definecolor{gs_don_col}{HTML}{1F78B4} % paired1 bleu foncé
\definecolor{gs_rec_col}{HTML}{E31A1C} % paired1 rouge foncé
\definecolor{kanr_col}{HTML}{06A858}
\definecolor{am1_col}{HTML}{E12C74}
\definecolor{am2_col}{HTML}{09997E}
\definecolor{ancre_don_col}{HTML}{9F3E85}
\definecolor{ancre_rec_col}{HTML}{FD73F7}
\definecolor{am3_col}{HTML}{53ADF6}
\definecolor{genome_col}{HTML}{C9A15A}

\definecolor{LightGray}{gray}{0.9}
\definecolor{DarkGray}{gray}{0.1}

%%
%% project management
%%
\usepackage{newclude}
\usepackage[french]{todonotes}

%%
%% marges
%%
\usepackage[a4paper]{geometry}
\geometry{
  a4paper,
  left=25mm,
  right=25mm,
  top=25mm,
  bottom=25mm
}

%%
%% images
%%
\usepackage{graphicx}
\usepackage{makecell}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{float}
\usepackage{wrapfig}
\usepackage{rotating}

%%
%% maths
%%
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{marvosym}
\usepackage{wasysym}
\usepackage{amssymb}
\usepackage{siunitx}
\usepackage[version=4]{mhchem} % pour les formules chimiques comme H2O

\providecommand{\e}[1]{\ensuremath{\times 10^{#1}}}
\AtBeginDocument{\sisetup{math-rm=\mathrm, text-rm=\rmfamily}}

\sisetup{math-micro = \fontspec{Palatino} \textmu, text-micro = \fontspec{Palatino} \textmu}
\sisetup{
  detect-mode=true,
  detect-family=false,
  detect-display-math=false,
  detect-shape=false,
  output-decimal-marker = {,},
  locale = FR
}

\usepackage[]{nicefrac}

%%
%% references
%%
\usepackage{hyperref}
\usepackage{csquotes}
\usepackage[super, comma]{natbib}
\bibliographystyle{asm}
\usepackage[]{multicol}

%%
%% acronymes
%%
\usepackage[pages = all]{acro}
% probably a good idea for the nomenclature entries:
\acsetup{first-style=short}
\acsetup{extra-style=comma}
\input{acro.tex}

%%
%% table des matières
%%
\setcounter{tocdepth}{3}
%% pas de titre
\deftocheading{toc}{\section*{Sommaire}}%
\usepackage[]{minitoc}

%%
%% typographie
%%
\usepackage[]{lipsum}
\usepackage[]{setspace}
%% line space
\setstretch{1.5}

\KOMAoptions{
  parskip = half-,
  draft = true,
  captions=tableheading
}
% \renewcommand*{\multfootsep}{,\nobreakspace}
\renewcommand*{\thefootnote}{\alph{footnote}}
\usepackage{perpage}
\MakePerPage{footnote}
\usepackage[perpage, norule]{footmisc}
\renewcommand\footnotelayout{\Large}


%%
%% title
%%
\usepackage[]{titlesec}
%% section format
\titleformat{\section}%
  {\normalfont\huge\rmfamily\bfseries\color{Cerulean}}% format applied to label+text
  {\llap{\colorbox{Cerulean}{\parbox{1.5cm}{\hfill\color{white}\thesection}}}}% label
  {0.5em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

% subsection format
\titleformat{\subsection}%
  {\normalfont\Large\rmfamily\color{TealBlue}}% format applied to label+text
  {\llap{\colorbox{TealBlue}{\parbox{0.7cm}{\hfill\color{white}\thesubsection}}}}% label
  {0.5em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

\titlespacing\subsubsection{0pt}{12pt plus 4pt minus 2pt}{0pt plus 2pt minus 2pt}
\titleformat{\subsubsection}%
  {\normalfont\rmfamily\itshape\large}% format applied to label+text
  {}% label
  {}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

%%
%% figures
%%

%% pour avoir le texte à droite et les figures à gauche
%% voir http://www.latex-community.org/forum/viewtopic.php?f=47&p=50022
% \usepackage{semioneside}
\usepackage{afterpage}
\usepackage{subcaption}
\usepackage{dpfloat}

\makeatletter

\newcommand\blankpage{%
    \null
    \thispagestyle{empty}%
    \addtocounter{page}{-1}%
    \newpage}

%% permet d'utiliser caption en dehors des floats
\makeatletter
\def\@captype{figure}
\makeatother

%%
%% TIKZ
%%

\usepackage[]{tikz}
\usetikzlibrary{matrix}
\usetikzlibrary{arrows.meta}

\newcommand{\tikzcircle}[2][Red, fill=Red]{\tikz[baseline = -0.5ex]
  \draw[#1, radius=#2] (0,0) circle; }

\newcommand{\numerocircle}[2][]{%
  \tikz[baseline = -0.5ex]%
  \draw[#1, fill = #1, opacity=0.5]
  (0, 0) circle (0.15cm)
  node[#1,text opacity=1, font=\scriptsize, midway] {#2}
  ;%
}

%%
%% title page
%%
\usepackage[]{pdfpages}
\usepackage{pdflscape}

%
% babel
%
% \usepackage[frenchb]{babel}
% \frenchbsetup{ThinColonSpace = true}
\usepackage{polyglossia}
\setmainlanguage{french}

% caption
\usepackage[figurename=Figure, tablename=Table]{caption} % must be loaded after babel
% \captionsetup[table]{position=top}
% \numberwithin{figure}{section}
% \numberwithin{table}{section}


\newcolumntype{r}{>{\columncolor{gs_rec_col}}c}
\newcolumntype{d}{>{\columncolor{gs_don_col}}c}
\newcolumntype{e}{>{\columncolor{am1_col}}c}
