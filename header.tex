%%
%% fonts
%%
% \usepackage[utf8]{inputenc}
% \usepackage[T1]{fontenc}
\usepackage[]{fontspec}
\setsansfont[Ligatures = TeX]{Helvetica}
\setmainfont[Ligatures = TeX]{ETBembo}
\setmonofont{Inconsolata}
\usepackage{xunicode}
% \usepackage[french, frenchb]{babel}
% \usepackage[osf, sc]{mathpazo}
% \usepackage{sansmath}
% \usepackage[euler-digits, small]{eulervm}
% \sansmath
% \usepackage[scaled]{helvet}
%\usepackage[scaled=0.9]{zi4}
%% sans font as default
\renewcommand\familydefault{\sfdefault}
\usepackage[x11names, dvipsnames, table]{xcolor}

%%
%% project management
%%

\usepackage{newclude}
%%
%% marges
%%
\usepackage[a4paper]{geometry}
\geometry{
  a4paper,
  left=25mm,
  right=25mm,
  top=25mm,
  bottom=25mm
}

%%
%% images
%%
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{float}
\usepackage{wrapfig}
\usepackage{rotating}


%%
%% maths
%%
\usepackage{amsmath}
% \usepackage[]{mathspec}
\usepackage{textcomp}
\usepackage{marvosym}
\usepackage{wasysym}
\usepackage{amssymb}
\usepackage{siunitx}
\usepackage[version=4]{mhchem} % pour les formules chimiques comme H2O

%%
%% references
%%
\usepackage{hyperref}
\usepackage{csquotes}
\usepackage[super, comma]{natbib}
\bibliographystyle{asm}
\usepackage[]{multicol}
\usepackage[para, perpage, symbol*]{footmisc}
\renewcommand\footnotelayout{\Large}

%% todo
\usepackage[french]{todonotes}
% \usepackage[]{cleveref}
%   \crefname{enumi}{position}{positions}
%%
%% acronymes
%%
\usepackage[]{acro}
% probably a good idea for the nomenclature entries:
\acsetup{first-style=short}
\input{acro.tex}

%%
%% table des matières
%%
\setcounter{tocdepth}{3}
%% pas de titre
\deftocheading{toc}{\section*{Sommaire}}%
% \renewcommand{\contentsname}{Sommaire}


%%
%% typographie
%%
% \usepackage[protrusion=true, expansion=alltext, tracking=true, kerning=true]{microtype}
\providecommand\newthought[1]{%
   \addvspace{0.5\baselineskip plus 0.3ex minus 0.1ex}%
   \noindent\textrm{\bsc{#1}} % small caps text out
}
\usepackage[]{lipsum}
\usepackage[]{setspace}
%% line space
\setstretch{1.5}

\KOMAoptions{
  parskip = half-,
  draft = true,
}
\renewcommand*{\multfootsep}{,\nobreakspace}

\newenvironment{transition}{%
    \begin{minipage}{\linewidth}%
      \rule{\linewidth}{0.2pt}%
      \flushleft
    }{%
      \rule{\linewidth}{0.2pt}%
    \end{minipage}%
}
\usepackage[]{nicefrac}

%%
%% color
%%
\usepackage[]{titlesec}
%% section format
\titleformat{\section}%
  {\normalfont\huge\rmfamily\bfseries\color{Cerulean}}% format applied to label+text
  {\llap{\colorbox{Cerulean}{\parbox{1.5cm}{\hfill\color{white}\thesection}}}}% label
  {0.5em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

% subsection format
\titleformat{\subsection}%
  {\normalfont\Large\rmfamily\color{TealBlue}}% format applied to label+text
  {\llap{\colorbox{TealBlue}{\parbox{0.7cm}{\hfill\color{white}\thesubsection}}}}% label
  {0.5em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

\titleformat{\subsubsection}%
  {\normalfont\rmfamily\itshape\large}% format applied to label+text
  {}% label
  {}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

%%
%% lang
%%


%%
%% figures
%%
%% pour avoir le texte à droite et les figures à gauche
%% voir http://www.latex-community.org/forum/viewtopic.php?f=47&p=50022
% \usepackage{semioneside}
\usepackage{afterpage}

\makeatletter
\newcommand\@addfig{\relax}
\newcommand\addfig[1]{\global\long\def\@addfig{#1}}
\newcommand\@putfig{\@addfig\addfig{\relax}}
\newcommand\blankpage{%
\null
\vfill
\@putfig%
\vfill
\thispagestyle{empty}% BEWARE, if you want the header and footer, you should put
                     % the correct style here
\clearpage%
\addtocounter{page}{-1}% BEWARE, if you want the left pages to be numbered,
                       % don't put this line, this is intended to have picture
                       % page with the same number as the facing text page
\afterpage{\blankpage}}
\makeatother

%% permet d'utiliser caption en dehors des floats
\makeatletter
\def\@captype{figure}
\makeatother

%%
%% TIKZ
%%

\usepackage[]{tikz}

\definecolor{plasmid_col}{HTML}{15588D}
\definecolor{gs_don_col}{HTML}{1F78B4} % paired1 bleu foncé
\definecolor{gs_rec_col}{HTML}{E31A1C} % paired1 rouge foncé
\definecolor{am1_col}{HTML}{06A858}
\definecolor{kanr_col}{HTML}{E12C74}
\definecolor{am2_col}{HTML}{09997E}
\definecolor{ancre_don_col}{HTML}{9F3E85}
\definecolor{ancre_rec_col}{HTML}{FD73F7}
\definecolor{am3_col}{HTML}{53ADF6}
\definecolor{genome_col}{HTML}{C9A15A}

\definecolor{LightGray}{gray}{0.9}
\definecolor{DarkGray}{gray}{0.1}

\usetikzlibrary{matrix}
\usetikzlibrary{arrows.meta}

% \usepackage[]{pgfplots}
% \usepgfplotslibrary{external}
% \tikzexternalize
% \usetikzlibrary{colorbrewer}
% \usetikzlibrary{graphs}

%%
%% title page
%%
\usepackage[]{pdfpages}
\usepackage{pdflscape}

%
% babel
%
% \usepackage[frenchb]{babel}
% \frenchbsetup{ThinColonSpace = true}
\usepackage{polyglossia}
\setmainlanguage{french}

% caption
\usepackage[figurename=Figure]{caption} % must be loaded after babel

\newcolumntype{r}{>{\columncolor{gs_rec_col}}c}
\newcolumntype{d}{>{\columncolor{gs_don_col}}c}
\newcolumntype{e}{>{\columncolor{am1_col}}c}